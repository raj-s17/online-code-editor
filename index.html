<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        body{
            overflow-x: hidden;
            overflow-y: hidden;
        }
        :root {
            --gradient1: linear-gradient(
            49deg,
            #fef4ff,
            #e5ecee,
            #e5ecee,
            #c3ddf3,
            #acc7f6,
            #a1b9f9,
            #d6c3ec,
            #e1dffc,
            #dadbfc,
            #caccf4,
            #cdacde
            );
        /* Other custom properties omitted for brevity */
        }

        #gradientText {
            font-size: 27px;
            background: var(--gradient1);
            background-size: 400% 400%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bg-animation 5s infinite linear;
        }
        
        @keyframes bg-animation {
            0% {
                background-position: left;
            }
            100% {
                background-position: right;
            }
        }

    </style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.11/mode/javascript/javascript.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="codemirror-5.65.11/lib/codemirror.css">
    <script src="codemirror-5.65.11/lib/codemirror.js"></script>
    
    <script src="codemirror-5.65.11/mode/python/python.js"></script>
    <script src="codemirror-5.65.11/mode/clike/clike.js"></script>
    
    <script src="codemirror-5.65.11/dialog/dialog.js"></script>
    <script src="codemirror-5.65.11/dialog/dialog.css"></script>
    <script src="codemirror-5.65.11/addon/search/search.js"></script>
    <script src="codemirror-5.65.11/addon/search/searchcursor.js"></script>
    <script src="codemirror-5.65.11/addon/search/jump-to-line.js"></script>
    
    <link rel="stylesheet" href="codemirror-5.65.11/theme/3024-day.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/3024-night.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/abbott.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/abcdef.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ambiance-mobile.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ambiance.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ayu-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ayu-mirage.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/base16-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/base16-light.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/bespin.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/blackboard.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/cobalt.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/colorforth.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/darcula.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/dracula.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/duotone-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/duotone-light.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/eclipse.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/elegant.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/erlang-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/gruvbox-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/hopscotch.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/icecoder.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/idea.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/isotope.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/juejin.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/lesser-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/liquibyte.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/lucario.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/material-darker.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/material-ocean.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/material-palenight.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/material.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/mbo.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/mdn-like.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/midnight.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/monokai.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/moxer.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/neo.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/neat.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/night.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/nord.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/oceanic-next.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/panda-syntax.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/paraiso-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/paraiso-light.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/pastel-on-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/railscasts.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/rubyblue.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/seti.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/shadowfox.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/solarized.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ssms.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/the-matrix.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/tomorrow-night-bright.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/tomorrow-night-eighties.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/ttcn.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/twilight.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/vibrant-ink.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/xq-dark.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/xq-light.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/yeti.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/yonce.css">
    <link rel="stylesheet" href="codemirror-5.65.11/theme/zenburn.css">
    <script src="codemirror-5.65.11/addon/edit/closebrackets.js"></script>
    <script src="codemirror-5.65.11/addon/edit/matchbrackets.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>

<body>
    
    <div id="content" class="row bg-dark">
        <div class="col bg-dark">
            <div class="d-flex p-2" style="background-color: #0f172a; width: 100%;border: 1px solid #4b5563">
                <div class="me-5">
                    <label id="gradientText" class="bi bi-file-earmark-code-fill" ><b> Online Code Editor</b></label>
                </div>
                <!--Language Button-->
                <div class="me-2">
                    <label class="visually-hidden" for="LangSelectPref">Preference</label>
                    <select style="background-color: rgb(31 41 55); border-color: rgb(75 85 99); color: white;"class="form-select" id="LangSelectPref">
                        <option value="Java">Java</option>
                        <option value="C">C</option>
                        <option value="Cpp">C++</option>
                        <option value="Python">Python</option>
                    </select>
                </div>
                
                <!--Theme Button-->
                <div class="me-2">
                    <label class="visually-hidden" for="ThemeSelectPref">Preference</label>
                    <select style="background-color: rgb(31 41 55); border-color: rgb(75 85 99); color: white;" class="form-select" id="ThemeSelectPref">
                        <option value="3024-day">3024-day</option>
                        <option value="3024-night">3024-night</option>
                        <option value="abbott">abbott</option>
                        <option value="abcdef">abcdef</option>
                        <option value="ambiance-mobile">ambiance-mobile</option>
                        <option value="ambiance">ambiance</option>
                        <option value="ayu-dark">ayu-dark</option>
                        <option value="ayu-mirage">ayu-mirage</option>
                        <option value="base16-dark">base16-dark</option>
                        <option value="base16-light">base16-light</option>
                        <option value="bespin">bespin</option>
                        <option value="blackboard">blackboard</option>
                        <option value="cobalt">cobalt</option>
                        <option value="colorforth">colorforth</option>
                        <option value="darcula">darcula</option>
                        <option value="dracula">dracula</option>
                        <option value="duotone-dark">duotone-dark</option>
                        <option value="duotone-light">duotone-light</option>
                        <option value="eclipse">eclipse</option>
                        <option value="elegant">elegant</option>
                        <option value="erlang-dark">erlang-dark</option>
                        <option value="gruvbox-dark">gruvbox-dark</option>
                        <option value="hopscotch">hopscotch</option>
                        <option value="icecoder">icecoder</option>
                        <option value="idea">idea</option>
                        <option value="isotope">isotope</option>
                        <option value="juejin">juejin</option>
                        <option value="lesser-dark">lesser-dark</option>
                        <option value="liquibyte">liquibyte</option>
                        <option value="lucario">lucario</option>
                        <option value="material-darker">material-darker</option>
                        <option value="material-ocean">material-ocean</option>
                        <option value="material-palenight">material-palenight</option>
                        <option value="material">material</option>
                        <option value="mbo">mbo</option>
                        <option value="mdn-like">mdn-like</option>
                        <option value="midnight">midnight</option>
                        <option value="monokai">monokai</option>
                        <option value="moxer">moxer</option>
                        <option value="neo">neo</option>
                        <option value="neat">neat</option>
                        <option value="night">night</option>
                        <option value="nord">nord</option>
                        <option value="oceanic-next">oceanic-next</option>
                        <option value="panda-syntax">panda-syntax</option>
                        <option value="paraiso-dark">paraiso-dark</option>
                        <option value="paraiso-light">paraiso-light</option>
                        <option value="pastel-on-dark">pastel-on-dark</option>
                        <option value="railscasts">railscasts</option>
                        <option value="rubyblue">rubyblue</option>
                        <option value="seti">seti</option>
                        <option value="shadowfox">shadowfox</option>
                        <option value="solarized">solarized</option>
                        <option value="ssms">ssms</option>
                        <option value="the-matrix">the-matrix</option>
                        <option value="tomorrow-night-bright">tom-night-bright</option>
                        <option value="tomorrow-night-eighties">tom-night-eighties</option>
                        <option value="ttcn">ttcn</option>
                        <option value="twilight">twilight</option>
                        <option value="vibrant-ink">vibrant-ink</option>
                        <option value="xq-dark">xq-dark</option>
                        <option value="xq-light">xq-light</option>
                        <option value="yeti">yeti</option>
                        <option value="yonce">yonce</option>
                        <option value="zenburn">zenburn</option>
                    </select>
                </div>
                
                <!--FontSize Button-->
                <div class="">
                    <label style="background-color: rgb(31 41 55); border-color: rgb(75 85 99); color: white;" class="btn btn-success w-75 h-100" for="fontSizeInput">Font Size <input type="number" id="fontSizeInput" value="16" style="text-align:center;" class="rounded w-50 h-100" oninput="changeFontSize(this.value)"></label>
                </div>
                
                <div class="" >
                    <!--FullScreen Button-->
                    <button style="background-color: rgb(31 41 55); border-color: rgb(75 85 99); color: white;" type="button" class="btn btn-success me-1" id="fullScreenButton">
                        <i id="fullScreenIcon" class="bi bi-fullscreen"></i> ( F11 )
                    </button>
                    
                    <!--Copy Button-->
                    <button type="button" id="copyButton" style="background-color: rgb(31 41 55); border-color: rgb(75 85 99); color: white;" type="button" class="btn btn-success bi bi-files me-1" onclick="copyTextFromEditor(editor)"> Copy</button>
                    
                    <!--Run Button-->
                    <button type="button" id="run" style="background-color: #2aa36b;" class="btn btn-secondary bi bi-play-circle-fill text-light me-1"> Run ( F9 )</button>
                    
                    <!--Save Button-->
                    <button type="button" style="background-color:rgb(79, 79, 227) ;" class="btn btn-secondary bi-cloud-arrow-down-fill me-1" onclick="saveCode()"> Save ( ctrl+s )</button>
                    
                    <!--Erase Button-->
                    <button type="button" style="background-color: rgb(126, 43, 203) ;" class="btn btn-secondary bi bi-eraser-fill me-1" onclick="eraseTextInEditor(editor)"> Erase ( ctrl+e )</button>
                    
                    <!--Rename Button
                    <button type="button" style="background-color:rgb(97, 97, 229) ;" class="btn btn-primary bi bi-send-fill" id="renameButton"> Rename</button>
                    -->
                </div>
            </div>

            <div style="display:flex;">
                <!--Editor Window-->
                <div style="border: 1px solid #4b5563;background-color: #0f172a; height: 93.5vh;">
                    <div>
                        <textarea id="editor"></textarea>
                    </div>
                </div>

                <!--Input & Output Window-->
                <div style="border: 1px solid #4b5563; flex:3; display: flex; flex-direction: column; height: 93.5vh;">
                    <div class="col d-flex flex-column px-2" style="background-color: #0f172a;">
                        <div class="h-75">
                            <label id="gradientText" for="Input" class="text-light mt-1 mb-2" style="font-size: 20px; display: flex; flex-direction: row;"><b>Input</b></label>
                            <textarea type="text" id="input" style="background-color: #1e293b; border-color: rgb(75 85 99); color: white; width: 100%;" class="form-control h-50" aria-label="Last name"></textarea>
                            <label id="gradientText" for="Output" class="text-light mt-1 mb-2" style="font-size: 20px; display: flex; flex-direction: row;"><b>Output</b></label>
                            <textarea type="text" id="output" style="background-color: #1e293b; border-color: rgb(75 85 99); color: white; width: 100%;" class="form-control h-50" aria-label="Last name"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

<script>
    //text on click refresh function
    var label = document.getElementById("gradientText");
    label.addEventListener("click", function() {
        location.reload();
    });

    //fontsize function
    function changeFontSize(size) {
        editor.getWrapperElement().style["font-size"] = size + "px";
        editor.refresh();
    }

    //copy function
    function copyTextFromEditor(editor) {
        var textarea = document.createElement('textarea');
        textarea.value = editor.getValue();
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert("Code copied successfully!");
    }

    //editor function
    var langoption = document.getElementById("LangSelectPref")
    var themeoption = document.getElementById("ThemeSelectPref")
    var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
        lineNumbers: true,
        autoCloseBrackets: true,
        matchBrackets: true,
        theme: "blackboard", // set default theme to blackboard 
        mode: "text/x-java" // set default mode to Java
    });
    langoption.value = "Java";
    themeoption.value = "blackboard";

    //sample code function
    var samples = {
        "Java": "/* Java sample code */\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, Welcome to Java!\");\n    }\n}",
        "C": "/* C sample code */\n#include <stdio.h>\n\nint main() {\n    printf(\"Hello, Welcome to C!\\n\");\n    return 0;\n}",
        "Cpp": "/* C++ sample code */\n#include <iostream>\nint main() {\n    std::cout << \"Hello, Welcome to C++!\" << std::endl;\n    return 0;\n}",
        "Python": "# Python sample code \nprint(\"Hello, Welcome to Python!\")"
    };
    // var samples = {
    //     "Java": "/* Java sample code */\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.print(\"Enter first number: \");\n        int num1 = input.nextInt();\n        System.out.print(\"\\nEnter second number: \");\n        int num2 = input.nextInt();\n        int sum = num1 + num2;\n        System.out.println(\"\\nThe sum of \" + num1 + \" and \" + num2 + \" is \" + sum);\n    }\n}",
    //     "C": "/* C sample code */\n#include <stdio.h>\n\nint main() {\n    int num1, num2, sum;\n    printf(\"Enter first number: \");\n    scanf(\"%d\", &num1);\n    printf(\"\\nEnter second number: \");\n    scanf(\"%d\", &num2);\n    sum = num1 + num2;\n    printf(\"\\nThe sum of %d and %d is %d\\n\", num1, num2, sum);\n    return 0;\n}",
    //     "Cpp": "/* C++ sample code */\n#include <iostream>\n\nusing namespace std;\n\nint main() {\n    int num1, num2, sum;\n    cout << \"Enter first number: \";\n    cin >> num1;\n    cout << \"\\nEnter second number: \";\n    cin >> num2;\n    sum = num1 + num2;\n    cout << \"\\nThe sum of \" << num1 << \" and \" << num2 << \" is \" << sum << endl;\n    return 0;\n}",
    //     "Python": "# Python sample code \nnum1 = int(input(\"Enter first number: \"))\nnum2 = int(input(\"\\nEnter second number: \"))\nsum = num1 + num2\nprint(\"\\nThe sum of\", num1, \"and\", num2, \"is\", sum)"
    // };


    function setSampleCode(language) {
        var code = samples[language];
        editor.setValue(code);
    }
    document.getElementById("LangSelectPref").addEventListener("change", function(event) {
        setSampleCode(event.target.value);
    });

    //save function
    function saveCode() {
        let code = editor.getValue().trim();
        let language = document.getElementById("LangSelectPref").value;
        let extension;
        switch (language) {
            case "Java":
            extension = ".java";
            break;
            case "C":
            extension = ".c";
            break;
            case "Cpp":
            extension = ".cpp";
            break;
            case "Python":
            extension = ".py";
            break;
            default:
            extension = ".txt";
        }
        if (code.length > 0) {
            let filename = prompt("Enter the filename:");
            if (filename) {
                let blob = new Blob([code], {type: "text/plain"});
                let url = URL.createObjectURL(blob);
                let a = document.createElement("a");
                a.href = url;
                a.download = filename + extension;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        } else {
            alert("Please enter some code to save.");
        }
    }
    document.addEventListener("keydown", function(event) {
        if (event.ctrlKey && event.key === "s") {
            event.preventDefault();
            saveCode();
        }
    });

    //erase function
    function eraseTextInEditor(editor) {
        if (confirm("Are you sure you want to erase the code?")) {
            editor.setValue('');
        }
    }
    document.addEventListener("keydown", (event) => {
        if (event.ctrlKey && event.key === "e") {
            let editor = document.querySelector('.CodeMirror').CodeMirror;
            if (confirm("Are you sure you want to erase the code?")) {
                editor.setValue("");
            }
            event.preventDefault();
        }
    });

    //theme function
    document.getElementById("ThemeSelectPref").addEventListener("change", function(event) {
        var theme = event.target.value;
        editor.setOption("theme", theme);
    });

    //fullsceen function
    let fullScreenButton = document.getElementById("fullScreenButton");
    let fullScreenIcon = document.getElementById("fullScreenIcon");
    fullScreenButton.addEventListener("click", () => {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    });
    document.addEventListener("fullscreenchange", () => {
        if (document.fullscreenElement) {
            fullScreenIcon.className = "bi bi-fullscreen-exit";
        } else {
            fullScreenIcon.className = "bi bi-fullscreen";
        }
    });
    document.addEventListener("keydown", (event) => {
        if (event.key === "F11") {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
            event.preventDefault();
        }
    });

    //run function
    var runButton = document.getElementById("run");
    runButton.addEventListener("click", function () {
        runButton.innerHTML = '<i class="fa fa-cog fa-spin"></i> Running...';
        runButton.classList.remove("bi-play-circle-fill");
        setTimeout(function() {
            runButton.innerHTML = '<i class="bi bi-play-circle-fill"></i> Run ( F9 )';
        }, 1500);
    });

    //language function
    var width = window.innerWidth
    var input = document.getElementById("input")
    var output = document.getElementById("output")
    var run = document.getElementById("run")
    function resizeEditor() {
        editor.setSize(0.7*width,"92vh");
      }

      window.addEventListener('resize', resizeEditor);
      resizeEditor();
    editor.setValue(samples["Java"]);
    var option = document.getElementById("LangSelectPref")
    option.addEventListener("change", function () {
        if (option.value == "C"){
            editor.setOption("mode", "text/x-csrc")
        }
        else if (option.value == "Cpp"){
            editor.setOption("mode", "text/x-c++src")
        }
        else if (option.value == "Java") {
            editor.setOption("mode", "text/x-java")
        }
        else if (option.value == "python") {
            editor.setOption("mode", "text/x-python")
        }
        
    })
    var code;
    run.addEventListener("click", async function () {
        code = {
            code: editor.getValue(),
            input: input.value,
            lang: option.value
        }
        var oData = await fetch("http://localhost:8000/compile", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(code)
        })
        var d = await oData.json()
        output.value = d.output
    })
    document.addEventListener("keydown", function(event) {
        if (event.key === "F9") {
            run.click();
        }
    });

    //Window Default Size
    window.addEventListener("resize", () => {
        const newWidth = 0.7 * window.innerWidth;
        const newHeight = 0.92 * window.innerHeight;
        editor.setSize(newWidth, newHeight);
    });

</script>

</html>